# Design Doc: DADSã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ä¸å¤‰æ€§å¯¾å¿œ

| é …ç›® | å†…å®¹ |
|------|------|
| **Status** | Draft |
| **Author** | Claude Code |
| **Created** | 2025-12-04 |
| **Issue** | [#11](https://github.com/monoharada/leonardo-learn/issues/11) |
| **Branch** | `feature/dads-immutable-tokens` |

## 1. æ¦‚è¦

### 1.1 èƒŒæ™¯

DADSãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆä¾‹: `Red100`â€“`Red1000`, `Orange500`ï¼‰ã¯**ä¸å¤‰ã®ID**ã¨ã—ã¦æ‰±ã†ã¹ãã“ã¨ãŒæ˜ç¢ºåŒ–ã•ã‚ŒãŸã€‚ç¾è¡Œã®CUD-awareãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ã‚’æœ€é©åŒ–ã—ãŸçµæœã‚’æ—¢å­˜ãƒ‘ãƒ¬ãƒƒãƒˆã‚¨ãƒ³ãƒˆãƒªã«ã€Œä¸Šæ›¸ãã€ã™ã‚‹å½¢ã§å‡ºåŠ›ã—ã¦ãŠã‚Šã€ã“ã‚Œã¯DADSãƒˆãƒ¼ã‚¯ãƒ³ã®ä¸å¤‰æ€§åŸå‰‡ã«é•åã™ã‚‹ã€‚

### 1.2 ç›®çš„

- DADSãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚«ãƒ©ãƒ¼ã‚’èª­ã¿å–ã‚Šå°‚ç”¨ã®å‚ç…§ã¨ã—ã¦æ‰±ã†
- ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼å‡ºåŠ›ã‚’ã€Œæ´¾ç”Ÿãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã€ã¨ã—ã¦æ˜ç¢ºã«åˆ†é›¢ã™ã‚‹
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«æ´¾ç”Ÿãƒˆãƒ¼ã‚¯ãƒ³ã¨DADSå‚ç…§ã®ä¸¡æ–¹ã‚’å«ã‚ã‚‹

### 1.3 åŸå‰‡

1. **DADSãƒˆãƒ¼ã‚¯ãƒ³ã¯ä¸å¤‰**: å€¤ã‚‚åå‰ã‚‚å¤‰æ›´ã—ãªã„
2. **å‚ç…§ã¨æ´¾ç”Ÿã‚’åˆ†é›¢**: å‡ºåŠ›ã¯å¸¸ã«ã€Œæ´¾ç”Ÿã€ã§ã‚ã‚Šã€DADSå‚ç…§ã‚’æŒã¤
3. **ä½¿ã„æ–¹ã¯è‡ªç”±**: ã©ã®DADSãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã©ã†ä½¿ã†ã‹ã¯ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå´ã®è²¬ä»»

## 2. ç¾è¡Œã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å•é¡Œ

### 2.1 ç¾è¡Œãƒ•ãƒ­ãƒ¼

```
ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼  â”€â”€â†’ Snapper/Optimizer â”€â”€â†’ å‡ºåŠ›è‰²
(#FF5500)           (Soft/Strict)        (#FF2800)
                          â”‚                  â”‚
                          â–¼                  â–¼
                    "Red500ã‚’ç½®æ›"     --color-red-500: #FF2800;

å•é¡Œ: DADSãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã€Œä¸Šæ›¸ãã€ã—ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹
```

### 2.2 å•é¡Œç®‡æ‰€

| ãƒ•ã‚¡ã‚¤ãƒ« | å•é¡Œç‚¹ |
|---------|--------|
| `src/core/cud/snapper.ts:46-57` | `SnapResult`ã¯`cudColor`ã‚’å‚ç…§ã™ã‚‹ãŒã€å‡ºåŠ›`hex`ãŒã€Œæ´¾ç”Ÿã€ã‹ã€Œç½®æ›ã€ã‹ä¸æ˜ |
| `src/core/cud/optimizer.ts:53-66` | `OptimizedColor`ã«DADS/Brandã®åŒºåˆ¥ãŒãªã„ |
| `src/core/export/css-exporter.ts` | å¤‰æ•°å`--color-*`ãŒDADSå›ºæœ‰ã‹ã€Brandå›ºæœ‰ã‹ä¸æ˜ |
| `src/core/export/json-exporter.ts:51-64` | `nearestId`ã¯ã‚ã‚‹ãŒã€Œå‚ç…§ã€ã¨ã„ã†æ¦‚å¿µãŒå¼±ã„ |

## 3. ææ¡ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3.1 æ¦‚å¿µãƒ¢ãƒ‡ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ææ¡ˆãƒ•ãƒ­ãƒ¼ï¼ˆDADSä¸å¤‰ï¼‰                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ DADS Primitives   â”‚  â† èª­ã¿å–ã‚Šå°‚ç”¨ã€å¤‰æ›´ä¸å¯                     â”‚
â”‚  â”‚ (Red, Orange, â€¦)  â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚            â”‚ å‚ç…§                                                   â”‚
â”‚            â–¼                                                        â”‚
â”‚  ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ â”€â”€â†’ Generator â”€â”€â†’ BrandToken                        â”‚
â”‚  (#FF5500)              â”‚         {                                â”‚
â”‚                         â”‚           id: "brand-primary-500",       â”‚
â”‚                         â”‚           hex: "#FF3000",                â”‚
â”‚                         â”‚           dadsReference: {               â”‚
â”‚                         â”‚             id: "red",                   â”‚
â”‚                         â”‚             hex: "#FF2800",              â”‚
â”‚                         â”‚             deltaE: 0.08                 â”‚
â”‚                         â”‚           }                              â”‚
â”‚                         â”‚         }                                â”‚
â”‚                         â–¼                                          â”‚
â”‚                    ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ                                     â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ãƒˆãƒ¼ã‚¯ãƒ³éšå±¤

```
TokenHierarchy
â”œâ”€â”€ DadsToken (ä¸å¤‰)
â”‚   â”œâ”€â”€ id: "dads-red"
â”‚   â”œâ”€â”€ hex: "#FF2800" (èª­ã¿å–ã‚Šå°‚ç”¨)
â”‚   â””â”€â”€ source: "dads"
â”‚
â””â”€â”€ BrandToken (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ‰€æœ‰)
    â”œâ”€â”€ id: "brand-primary-500"
    â”œâ”€â”€ hex: "#FF3000" (æ´¾ç”Ÿå€¤)
    â”œâ”€â”€ source: "brand"
    â””â”€â”€ dadsReference
        â”œâ”€â”€ tokenId: "dads-red"
        â”œâ”€â”€ deltaE: 0.080
        â””â”€â”€ derivationType: "soft-snap"
```

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### 4.1 å‹å®šç¾©

```typescript
// src/core/tokens/types.ts

/**
 * ãƒˆãƒ¼ã‚¯ãƒ³ã‚½ãƒ¼ã‚¹ã®è­˜åˆ¥å­
 */
export type TokenSource = "dads" | "brand";

/**
 * æ´¾ç”Ÿã‚¿ã‚¤ãƒ—
 */
export type DerivationType =
  | "strict-snap"   // CUDè‰²ã«å®Œå…¨ã‚¹ãƒŠãƒƒãƒ—
  | "soft-snap"     // éƒ¨åˆ†çš„ã‚¹ãƒŠãƒƒãƒ—
  | "reference"     // å‚ç…§ã®ã¿ï¼ˆå€¤å¤‰æ›´ãªã—ï¼‰
  | "manual";       // æ‰‹å‹•è¨­å®š

/**
 * DADSãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆä¸å¤‰ï¼‰
 * DADSãŒæä¾›ã™ã‚‹ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚«ãƒ©ãƒ¼
 */
export interface DadsToken {
  readonly id: string;           // "dads-red", "dads-orange"
  readonly hex: string;          // "#FF2800" (ä¸å¤‰)
  readonly nameJa: string;       // "èµ¤"
  readonly nameEn: string;       // "Red"
  readonly group: CudGroup;      // "accent" | "base" | "neutral"
  readonly source: "dads";       // å¸¸ã« "dads"
}

/**
 * DADSå‚ç…§æƒ…å ±
 * ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ãŒã©ã®DADSãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‹
 */
export interface DadsReference {
  /** å‚ç…§å…ˆDADSãƒˆãƒ¼ã‚¯ãƒ³ID */
  tokenId: string;               // "dads-red"
  /** å‚ç…§å…ˆDADSãƒˆãƒ¼ã‚¯ãƒ³ã®HEXï¼ˆä¸å¤‰å€¤ï¼‰ */
  tokenHex: string;              // "#FF2800"
  /** è‰²å·®ï¼ˆdeltaEï¼‰ */
  deltaE: number;                // 0.080
  /** æ´¾ç”Ÿã‚¿ã‚¤ãƒ— */
  derivationType: DerivationType;
  /** CUDã‚¾ãƒ¼ãƒ³ */
  zone: CudZone;
}

/**
 * ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ‰€æœ‰ï¼‰
 * ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒå®šç¾©ã™ã‚‹æ´¾ç”Ÿã‚«ãƒ©ãƒ¼
 */
export interface BrandToken {
  /** ãƒˆãƒ¼ã‚¯ãƒ³ID */
  id: string;                    // "brand-primary-500"
  /** è‰²å€¤ï¼ˆæ´¾ç”Ÿå€¤ã€å¤‰æ›´å¯èƒ½ï¼‰ */
  hex: string;                   // "#FF3000"
  /** ã‚½ãƒ¼ã‚¹ */
  source: "brand";               // å¸¸ã« "brand"
  /** DADSå‚ç…§æƒ…å ± */
  dadsReference: DadsReference;
  /** å…ƒã®å…¥åŠ›è‰²ï¼ˆæœ€é©åŒ–å‰ï¼‰ */
  originalHex?: string;          // "#FF5500"
}

/**
 * çµ±åˆã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³å‹
 */
export type ColorToken = DadsToken | BrandToken;

/**
 * ãƒˆãƒ¼ã‚¯ãƒ³ãŒDADSãƒˆãƒ¼ã‚¯ãƒ³ã‹ã©ã†ã‹ã‚’åˆ¤å®š
 */
export function isDadsToken(token: ColorToken): token is DadsToken {
  return token.source === "dads";
}

/**
 * ãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã‹ã©ã†ã‹ã‚’åˆ¤å®š
 */
export function isBrandToken(token: ColorToken): token is BrandToken {
  return token.source === "brand";
}
```

### 4.2 Snapperå‡ºåŠ›ã®å¤‰æ›´

```typescript
// src/core/cud/snapper.ts å¤‰æ›´æ¡ˆ

/**
 * Soft Snapçµæœï¼ˆæ‹¡å¼µç‰ˆï¼‰
 */
export interface SoftSnapResult {
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰
  hex: string;
  originalHex: string;
  cudColor: CudColor;
  snapped: boolean;
  deltaE: number;
  zone: CudZone;
  deltaEChange: number;
  explanation: string;

  // æ–°è¦: ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆç”¨æƒ…å ±
  derivation: {
    /** æ´¾ç”Ÿã‚¿ã‚¤ãƒ— */
    type: DerivationType;
    /** å‚ç…§å…ˆDADSãƒˆãƒ¼ã‚¯ãƒ³ID */
    dadsTokenId: string;
    /** å‚ç…§å…ˆDADSãƒˆãƒ¼ã‚¯ãƒ³HEXï¼ˆä¸å¤‰ï¼‰ */
    dadsTokenHex: string;
    /** æ´¾ç”Ÿå€¤HEXï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã®å€¤ï¼‰ */
    brandTokenHex: string;
  };
}
```

### 4.3 Optimizerå‡ºåŠ›ã®å¤‰æ›´

```typescript
// src/core/cud/optimizer.ts å¤‰æ›´æ¡ˆ

/**
 * æœ€é©åŒ–ã•ã‚ŒãŸè‰²ï¼ˆæ‹¡å¼µç‰ˆï¼‰
 */
export interface OptimizedColor {
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  hex: string;
  originalHex: string;
  zone: CudZone;
  deltaE: number;
  snapped: boolean;
  cudTarget?: CudColor;

  // æ–°è¦: ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±
  brandToken: {
    /** æ¨å¥¨ãƒˆãƒ¼ã‚¯ãƒ³ID */
    suggestedId: string;         // "brand-primary-500"
    /** DADSå‚ç…§ */
    dadsReference: DadsReference;
  };
}
```

## 5. ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­è¨ˆ

### 5.1 CSSå‡ºåŠ›

```css
/**
 * DADS Primitivesï¼ˆå‚ç…§ç”¨ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã¯å¤‰æ›´ä¸å¯ï¼‰
 * ã“ã‚Œã‚‰ã®å€¤ã¯å¤‰æ›´ã—ãªã„ã§ãã ã•ã„ã€‚
 * ç‹¬è‡ªã®è‰²ãŒå¿…è¦ãªå ´åˆã¯ brand-* ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
 */
:root {
  --dads-red: #FF2800;
  --dads-orange: #FF9900;
  --dads-yellow: #FAF500;
  --dads-green: #35A16B;
  --dads-blue: #0041FF;
  --dads-sky-blue: #66CCFF;
  --dads-pink: #FF99A0;
  --dads-purple: #9A0079;
  --dads-brown: #663300;
  /* ... base colors ... */
  /* ... neutral colors ... */
}

/**
 * Brand Tokensï¼ˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ‰€æœ‰ã€æ´¾ç”Ÿå€¤ï¼‰
 * ã“ã‚Œã‚‰ã®ãƒˆãƒ¼ã‚¯ãƒ³ã¯DADSãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‹ã‚‰æ´¾ç”Ÿã—ã¦ã„ã¾ã™ã€‚
 */
:root {
  /* Primary: Derived from --dads-red (Î”E=0.080, soft-snap) */
  --brand-primary-500: #FF3000;

  /* Secondary: Strict snap to --dads-green */
  --brand-secondary-500: #35A16B;

  /* Accent: Derived from --dads-orange (Î”E=0.120, soft-snap) */
  --brand-accent-500: #FF8800;
}
```

### 5.2 JSONå‡ºåŠ›

```json
{
  "metadata": {
    "version": "2.0.0",
    "generatedAt": "2025-12-04T09:00:00.000Z",
    "tokenSchema": "dads-brand-v1"
  },

  "dadsTokens": {
    "red": {
      "id": "dads-red",
      "hex": "#FF2800",
      "nameJa": "èµ¤",
      "nameEn": "Red",
      "group": "accent",
      "source": "dads",
      "immutable": true
    }
  },

  "brandTokens": {
    "brand-primary-500": {
      "id": "brand-primary-500",
      "hex": "#FF3000",
      "source": "brand",
      "originalHex": "#FF5500",
      "dadsReference": {
        "tokenId": "dads-red",
        "tokenHex": "#FF2800",
        "deltaE": 0.080,
        "derivationType": "soft-snap",
        "zone": "warning"
      }
    },
    "brand-secondary-500": {
      "id": "brand-secondary-500",
      "hex": "#35A16B",
      "source": "brand",
      "originalHex": "#2D8F5E",
      "dadsReference": {
        "tokenId": "dads-green",
        "tokenHex": "#35A16B",
        "deltaE": 0.000,
        "derivationType": "strict-snap",
        "zone": "safe"
      }
    }
  },

  "cudSummary": {
    "complianceRate": 100,
    "mode": "soft",
    "zoneDistribution": {
      "safe": 1,
      "warning": 1,
      "off": 0
    }
  }
}
```

### 5.3 DTCG (Design Tokens Community Group) å½¢å¼

```json
{
  "$schema": "https://design-tokens.org/schema.json",

  "dads": {
    "$description": "DADS Primitive Colors (Immutable)",
    "red": {
      "$value": "#FF2800",
      "$type": "color",
      "$extensions": {
        "com.dads.immutable": true,
        "com.dads.group": "accent",
        "com.dads.nameJa": "èµ¤"
      }
    }
  },

  "brand": {
    "$description": "Brand Derived Colors",
    "primary": {
      "500": {
        "$value": "#FF3000",
        "$type": "color",
        "$extensions": {
          "com.dads.reference": "{dads.red}",
          "com.dads.deltaE": 0.080,
          "com.dads.derivationType": "soft-snap"
        }
      }
    }
  }
}
```

## 6. å‘½åè¦å‰‡

### 6.1 æ¨å¥¨æ¡ˆ: ä¸¡æ–¹ã«æ¥é ­è¾ï¼ˆOption Cï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ‘ã‚¿ãƒ¼ãƒ³ | ä¾‹ |
|---------|----------|-----|
| DADS Primitive | `dads-{color}` | `--dads-red`, `--dads-blue` |
| Brand Token | `brand-{role}-{shade}` | `--brand-primary-500`, `--brand-accent-300` |

**ç†ç”±:**
- è¡çªãªã—: DADSã¨BrandãŒåå‰ç©ºé–“ã§å®Œå…¨åˆ†é›¢
- å‡ºè‡ªãŒæ˜ç¢º: å¤‰æ•°åã ã‘ã§ã‚½ãƒ¼ã‚¹ãŒã‚ã‹ã‚‹
- æ‹¡å¼µæ€§: å°†æ¥çš„ã«ä»–ã®ã‚½ãƒ¼ã‚¹ï¼ˆ`system-*`, `theme-*`ï¼‰ã‚’è¿½åŠ å¯èƒ½

### 6.2 ä»£æ›¿æ¡ˆ

| Option | DADS | Brand | å‚™è€ƒ |
|--------|------|-------|------|
| A | `dads-red-500` | `red-500` | ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒè‡ªç„¶ãªåå‰ã‚’ä½¿ãˆã‚‹ |
| B | `red-500` | `brand-primary-500` | DADSãŒã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èªã€ |
| **C** (æ¨å¥¨) | `dads-red` | `brand-primary-500` | è¡çªãªã—ã€å‡ºè‡ªæ˜ç¢º |

## 7. UIè¨­è¨ˆ

### 7.1 DADSãƒˆãƒ¼ã‚¯ãƒ³ä¿è­·

```typescript
// src/ui/cud-components.ts å¤‰æ›´æ¡ˆ

/**
 * ãƒˆãƒ¼ã‚¯ãƒ³ç·¨é›†ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
 */
interface TokenEditGuard {
  /** ç·¨é›†å¯èƒ½ã‹ */
  canEdit: boolean;
  /** ç·¨é›†ä¸å¯ã®å ´åˆã®ç†ç”± */
  reason?: string;
  /** ä»£æ›¿ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®æ¡ˆå†… */
  suggestion?: string;
}

/**
 * ãƒˆãƒ¼ã‚¯ãƒ³ã®ç·¨é›†å¯å¦ã‚’åˆ¤å®š
 */
function checkTokenEditability(token: ColorToken): TokenEditGuard {
  if (isDadsToken(token)) {
    return {
      canEdit: false,
      reason: "DADSãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚«ãƒ©ãƒ¼ã¯å¤‰æ›´ã§ãã¾ã›ã‚“",
      suggestion: "ç‹¬è‡ªã®è‰²ãŒå¿…è¦ãªå ´åˆã¯ã€Œãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã€ã‚’é¸æŠã—ã¦ãã ã•ã„"
    };
  }

  return { canEdit: true };
}
```

### 7.2 UIè¡¨ç¤ºæ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚ â”‚ DADS Primitives  ğŸ”’                 â”‚                             â”‚
â”‚ â”‚ (å‚ç…§å°‚ç”¨ãƒ»ç·¨é›†ä¸å¯)                â”‚                             â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚ â”‚ ğŸ”´ èµ¤      #FF2800                  â”‚                             â”‚
â”‚ â”‚ ğŸŸ  ã‚ªãƒ¬ãƒ³ã‚¸ #FF9900                  â”‚                             â”‚
â”‚ â”‚ ğŸŸ¡ é»„      #FAF500                  â”‚                             â”‚
â”‚ â”‚ ğŸŸ¢ ç·‘      #35A16B                  â”‚                             â”‚
â”‚ â”‚ ğŸ”µ é’      #0041FF                  â”‚                             â”‚
â”‚ â”‚ ...                                 â”‚                             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚ â”‚ Brand Tokens  âœï¸                    â”‚                             â”‚
â”‚ â”‚ (ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ‰€æœ‰ãƒ»ç·¨é›†å¯èƒ½)          â”‚                             â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚ â”‚ ğŸ”´ Primary-500  #FF3000             â”‚                             â”‚
â”‚ â”‚    â””â”€ å‚ç…§: dads-red (Î”E=0.080)     â”‚                             â”‚
â”‚ â”‚ ğŸŸ¢ Secondary-500 #35A16B            â”‚                             â”‚
â”‚ â”‚    â””â”€ å‚ç…§: dads-green (å®Œå…¨ä¸€è‡´)   â”‚                             â”‚
â”‚ â”‚                                     â”‚                             â”‚
â”‚ â”‚ [+ ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿½åŠ ]          â”‚                             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 8. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### 8.1 æ—¢å­˜å‡ºåŠ›ã‹ã‚‰ã®ç§»è¡Œ

```typescript
// src/utils/migration.ts

/**
 * v1å½¢å¼ï¼ˆä¸Šæ›¸ãå‹ï¼‰ã‹ã‚‰v2å½¢å¼ï¼ˆå‚ç…§å‹ï¼‰ã¸ã®ç§»è¡Œ
 */
export interface MigrationResult {
  /** ç§»è¡Œã•ã‚ŒãŸãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ */
  brandTokens: BrandToken[];
  /** è­¦å‘Šï¼ˆæ¨å®šãŒå¿…è¦ã ã£ãŸç®‡æ‰€ï¼‰ */
  warnings: string[];
  /** ç§»è¡Œã§ããªã‹ã£ãŸè‰² */
  unmigrated: string[];
}

/**
 * æ—¢å­˜ã®OptimizedColoré…åˆ—ã‚’BrandTokené…åˆ—ã«å¤‰æ›
 */
export function migrateOptimizedColors(
  colors: OptimizedColor[],
  options: {
    /** ãƒ–ãƒ©ãƒ³ãƒ‰åæ¥é ­è¾ */
    brandPrefix?: string;
    /** ãƒ­ãƒ¼ãƒ«åï¼ˆprimary, secondary, etc.ï¼‰ */
    roles?: string[];
  }
): MigrationResult {
  // å®Ÿè£…...
}
```

### 8.2 å¾Œæ–¹äº’æ›æ€§

- v1 APIï¼ˆ`OptimizedColor`ï¼‰ã¯éæ¨å¥¨ï¼ˆdeprecatedï¼‰ã¨ã—ã¤ã¤ç¶­æŒ
- v2 APIï¼ˆ`BrandToken`ï¼‰ã‚’æ¨å¥¨
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ã¯`version`ãƒ•ãƒ©ã‚°ã§å‡ºåŠ›å½¢å¼ã‚’åˆ‡ã‚Šæ›¿ãˆ

## 9. å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

| Phase | å†…å®¹ | å„ªå…ˆåº¦ | æ¨å®šå·¥æ•° |
|-------|------|--------|----------|
| **1** | å‹å®šç¾©ï¼ˆ`types.ts`ï¼‰ä½œæˆ | High | S |
| **2** | Snapperå‡ºåŠ›ã«`derivation`è¿½åŠ  | High | M |
| **3** | Optimizerå‡ºåŠ›ã«`brandToken`è¿½åŠ  | High | M |
| **4** | CSS Exporter v2å½¢å¼å¯¾å¿œ | Medium | M |
| **5** | JSON Exporter v2å½¢å¼å¯¾å¿œ | Medium | M |
| **6** | UIä¿è­·ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ« | Medium | S |
| **7** | ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | Low | M |
| **8** | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° | Low | S |

## 10. æœªè§£æ±ºäº‹é …

### 10.1 æ¤œè¨ä¸­

- [ ] DADSãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚¹ã‚±ãƒ¼ãƒ«è¡¨ç¾ï¼ˆ`Red100`ã€œ`Red1000`ï¼‰ã¯å¿…è¦ã‹ï¼Ÿ
- [ ] ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã«è¤‡æ•°ã®DADSå‚ç…§ã‚’æŒãŸã›ã‚‹ã‚±ãƒ¼ã‚¹ï¼ˆã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ï¼‰
- [ ] ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ`error`, `success`ï¼‰ã¨ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã®é–¢ä¿‚

### 10.2 ä»Šå¾Œã®è­°è«–

- DADSå´ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ï¼ˆv4 â†’ v5ç§»è¡Œæ™‚ã®å¯¾å¿œï¼‰
- è¤‡æ•°ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–“ã§ã®ãƒ–ãƒ©ãƒ³ãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³å…±æœ‰

## 11. å‚è€ƒè³‡æ–™

- [Issue #11: DADSã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¸å¤‰æ€§å¯¾å¿œ](https://github.com/monoharada/leonardo-learn/issues/11)
- [CUDæ¨å¥¨é…è‰²ã‚»ãƒƒãƒˆ ver.4](https://jfly.uni-koeln.de/colorset/)
- [Design Tokens Community Group](https://design-tokens.github.io/community-group/)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|----------|
| 2025-12-04 | 0.1 | åˆç‰ˆä½œæˆ |
