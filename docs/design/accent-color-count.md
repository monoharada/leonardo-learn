# アクセントカラーの「必要数」ガイド（セマンティック固定前提）

このドキュメントは、`leonardo-learn`（アクセシビリティ要件を満たすカラーパレット生成ツール）において、
**色に詳しくないデザイナー/PdMでも破綻しにくい**「アクセントカラーは何色あれば十分か」を決めるための指針をまとめたもの。

## TL;DR（結論）

- **UI用アクセント（ボタン/リンク/強調など）**: **3色が十分（推奨デフォルト）**
  - 例: `Primary / Secondary / Tertiary`（Material 3的）または `Primary / Secondary / Accent`
- **カテゴリ用アクセント（タグ/分類/簡易チャート）**: UIアクセントとは別枠で **6〜9色**
  - このリポジトリが統合している **CUD推奨配色セット ver.4 のアクセント9色**を上限目安として採用できる

> 「セマンティック（Success/Warning/Error/Info 等）」は固定、という前提なら、  
> アクセントを増やすほど *“意味の衝突”* と *運用コスト* が急増するため、**デフォルトは少なく**、必要な場合のみ拡張する設計が安全。

## 1. このリポジトリがやっていること（前提整理）

本リポジトリは、ブランドカラー（1色）からデザインシステム向けのパレット（複数の色相 + 各色相の濃淡スケール）を生成し、
以下のアクセシビリティ検証・補助機能を提供する。

- OKLCH/OKLABベースの生成と色差計算
- WCAG 2.1/2.2 コントラスト検証、WCAG3(APCA)対応
- CVD（P/D/T型）シミュレーションと混同リスク検出
- CUD推奨配色セット ver.4（20色）の統合（検証/バッジ/スナップ）

重要なのは、「色の数」＝「**色相（役割色）の数**」であり、実際には各色相ごとに複数のシェード（50〜1200など）を持つため、
**色相が1つ増えるだけで運用対象のトークンが増える**点。

## 2. 用語定義（意思決定を分ける）

### 2.1 セマンティックカラー（固定）

Success / Warning / Error / Info など、**意味が先に立つ色**。
UI上で「状態」や「重要な通知」を表すため、ブランドや装飾用途とは混ぜない前提。

### 2.2 アクセントカラー（本題）

ここでの「アクセント」は1種類ではなく、用途で分けると破綻しにくい。

1) **UI用アクセント**  
   操作要素（CTA、フォーカス、選択状態、リンク、強調表示）で使う色相。

2) **カテゴリ用アクセント**  
   タグ/カテゴリ/シリーズ/簡易チャートなど「区別」を目的に使う色相。
   UI操作色と同じ枠で増やすと意味が壊れやすいので、**別枠のパレット**として扱うのが安全。

## 3. リポジトリ内の“既存設計”が示唆するアクセント数

### 3.1 ハーモニー生成（色相の数がモードで変わる）

- Complementary: 2色相（Primary+Secondary）
- Triadic/Analogous/Split-Complementary: 3色相（Primary+Secondary+Accent）
- Tetradic/Square: 4色相（Primary+Secondary+Accent1+Accent2）
- Material 3: 主要は3色相（Primary/Secondary/Tertiary）

→ **3色相は「十分な多様性」と「破綻しにくさ」のバランス点**として、既存の生成モードとも整合する。

### 3.2 CUD推奨配色セット ver.4（アクセント9色）

`docs/cud-feature-overview.md` では、CUD 20色が
**アクセント9色 + ベース7色 + 無彩色4色**であることが明示されている。

→ 「カテゴリ用の区別色」を考える場合、**9色**はすでに本ツールが扱う“実績ある上限”になっている。

### 3.3 DADSモード内のアクセント定義（9個）

`src/core/harmony.ts` の `DADS_COLORS` には、アクセントとして複数の色相が定義されている（紫/青/水色/シアン/緑/ライム/黄/オレンジ等）。

→ 本ツールは「アクセント候補を9色相程度持つ」思想とも相性が良いが、  
それを**そのまま“UIのアクセント”として全部露出すると、非専門家には過剰**になりやすい。

## 4. 推奨: 「UI用」と「カテゴリ用」を分けて数を決める

### 4.1 UI用アクセントは **3色** をデフォルトにする

**推奨デフォルト: 3色相**

- Primary: ブランドの主役（CTA/主要な強調）
- Secondary: 補助の操作要素（サブCTAなど）
- Tertiary（or Accent）: 追加の強調/装飾（バッジ、ハイライト、図表の少数系列など）

**理由（非専門家運用に効くポイント）**

- 意味の衝突を避けやすい（セマンティックと混ざりにくい）
- コンポーネントの状態（hover/active/focus/disabled）を設計しやすい
- コントラスト/ダークモード/色覚多様性の検証対象が増えすぎない

> 3色相でも、各色相にシェードスケールを持つため、実際の表現幅は十分に広い。

### 4.2 カテゴリ用アクセントは **6〜9色**（別枠）を推奨

**推奨: 6〜9色相（上限9）**

- 目的が「区別」である以上、必要なのは“色数”だが、増やすほどCVD下での混同ペアも増える
- 本ツールにはCVD混同リスク検出があるため、カテゴリ色は **CUDアクセント9色**を起点にするのが安全

> UIアクセント（3）とカテゴリ（最大9）を同じ選択画面・同じロール名で混ぜない。  
> 「カテゴリパレット」や「データ可視化」など**用途ラベルで隔離**する。

## 5. ツール設計への落とし込み（ガードレール）

### 5.1 “色相の数”をユーザーが迷わず決められるUI

非専門家向けなら、自由入力より **プリセット**が強い。

- UIアクセント: `3色（推奨） / 4色（上級） / 5色（例外）`
- カテゴリ: `6色 / 9色（CUD準拠）`

### 5.2 “数を増やす”ときの注意喚起ポイント

アクセント色相が増えるほど、以下が増える（ツール側で自動チェック/警告の対象にする）。

- コントラスト要件を満たすシェードの確保（背景/文字/境界）
- 近接色（DeltaEが小さい）やCVD混同ペア
- セマンティック色との誤認（Errorっぽい赤を装飾に使う等）

## 6. 判断基準（プロダクト要件から逆算）

アクセント数は「好み」ではなく「用途」で決めると事故が減る。

- 画面上の“同時に見える区別”が最大いくつ必要か
  - UI操作色は同時に多くても2〜3が限度（それ以上は意味が追えない）
  - カテゴリは同時に6〜9程度までが現実的（それ以上は色覚多様性で破綻しやすい）
- データ可視化が主用途か（主ならカテゴリ色を別枠で強化）
- ダークモードが必須か（必須なら色相追加のコストはさらに上がる）

## 7. 本ツールにおける推奨デフォルト案（提案）

1) **UIパレット（推奨デフォルト）**
   - `Primary / Secondary / Tertiary` の3色相
   - セマンティックは固定（Success/Warning/Error/Info）

2) **カテゴリパレット（必要時に追加）**
   - CUDアクセント9色（または6色に間引き）を提供
   - CVD混同リスクと類似色（DeltaE）警告を必須にする

---

## 参照（リポジトリ内）

- CUDセットの構成（アクセント9色の明記）: `docs/cud-feature-overview.md`
- DADSアクセント定義とハーモニー生成: `src/core/harmony.ts`
- アクセント候補生成（DADS 10色相×13ステップ=130候補から選ぶ）: `src/core/accent/accent-candidate-service.ts`

