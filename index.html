<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leonardo Learn Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            padding: 0;
            margin: 0;
            background-color: #f5f5f5;
            height: 100vh;
            overflow: hidden;
        }

        h1 {
            margin-bottom: 1.5rem;
        }

        .palette {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .swatch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .swatch-info {
            display: flex;
            gap: 1rem;
        }

        .contrast-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div style="display: flex; height: 100vh; overflow: hidden;">
        <!-- Sidebar -->
        <div
            style="width: 340px; background: white; border-right: 1px solid #eee; display: flex; flex-direction: column; height: 100vh;">
            <div style="padding: 1.5rem; border-bottom: 1px solid #eee;">
                <h1 style="font-size: 1.2rem; margin-bottom: 1.5rem; font-weight: 800;">Leonardo Learn</h1>
                
                <!-- Global Key Color Input -->
                <div style="margin-bottom: 1rem;">
                    <label for="keyColors" style="display:block; font-weight:bold; font-size: 0.85rem; margin-bottom:0.25rem;">Brand Color</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <input type="text" id="keyColors"
                            style="flex: 1; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; font-size: 0.9rem;"
                            placeholder="#0066CC" value="#0066CC">
                        <button id="generate-system" style="padding: 0.5rem 1rem; background: #0052cc; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 0.9rem;">
                            Generate
                        </button>
                    </div>
                </div>

                <!-- Harmony Selection (Moved here) -->
                <div style="margin-bottom: 1rem;">
                    <label style="display:block; font-weight:bold; font-size: 0.85rem; margin-bottom:0.25rem;">Harmony</label>
                    <div id="harmony-buttons" style="display: flex; flex-wrap: wrap; gap: 0.25rem;">
                        <button data-value="none" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">None</button>
                        <button data-value="complementary" class="active" style="padding: 0.3rem 0.6rem; border: 2px solid #0052cc; border-radius: 4px; background: #e3f2fd; cursor: pointer; font-weight: bold; font-size: 0.75rem;">Comp</button>
                        <button data-value="analogous" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Analog</button>
                        <button data-value="triadic" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Triad</button>
                        <button data-value="split-complementary" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Split</button>
                        <button data-value="tetradic" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Tetrad</button>
                        <button data-value="square" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Square</button>
                    </div>
                    <!-- Hidden select for backward compatibility/state storage if needed, or just remove -->
                    <input type="hidden" id="harmony" value="complementary"> 
                </div>
            </div>

            <!-- Palette List -->
            <div style="flex: 1; overflow-y: auto; padding: 1rem;">
                <h3 style="font-size: 0.85rem; text-transform: uppercase; color: #666; margin-bottom: 0.5rem; padding-left: 0.5rem;">Palettes</h3>
                <div id="palette-list">
                    <!-- List of palettes will go here -->
                </div>
                
                <button id="add-palette"
                    style="width: 100%; padding: 0.5rem; border: 1px dashed #ccc; background: none; cursor: pointer; border-radius: 4px; margin-top: 1rem; color: #666;">
                    + Add Custom Palette
                </button>
            </div>

            <!-- Selected Palette Controls (Moved from Editor) -->
            <div id="sidebar-controls" style="padding: 1.5rem; border-top: 1px solid #eee; background: #f9f9f9; max-height: 40vh; overflow-y: auto;">
                <h3 id="current-palette-name" style="margin-top: 0; font-size: 1rem; margin-bottom: 1rem;">Palette Settings</h3>
                





                
                 <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #ddd;">
                    <button id="export-css"
                        style="width: 100%; margin-bottom: 0.5rem; padding: 0.5rem; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;">
                    Export CSS</button>
                    <button id="export-json"
                        style="width: 100%; padding: 0.5rem; background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;">
                    Export JSON</button>
                </div>
            </div>
        </div>

        <!-- Main Content (Right) -->
        <div style="flex: 1; display: flex; flex-direction: column; height: 100vh; overflow: hidden; background: #f5f5f5;">
            
            <!-- Header / View Switcher -->
            <div style="background: white; border-bottom: 1px solid #eee; padding: 1rem 2rem; display: flex; align-items: center; justify-content: space-between;">
                <div style="display: flex; background: #f0f0f0; padding: 4px; border-radius: 8px;">
                    <button id="view-palette" class="view-btn active" style="padding: 0.5rem 1.5rem; border: none; border-radius: 6px; background: white; font-weight: bold; shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer;">Palette</button>
                    <button id="view-shades" class="view-btn" style="padding: 0.5rem 1.5rem; border: none; border-radius: 6px; background: transparent; color: #666; cursor: pointer;">Shades</button>
                </div>
                <div id="header-contrast-controls" style="display: none; align-items: center; gap: 0.5rem;">
                    <label style="font-weight:bold; font-size: 0.85rem; color: #666;">Contrast:</label>
                    <div id="contrastIntensityButtons" style="display: flex; gap: 0.25rem;">
                        <button data-value="subtle" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Subtle</button>
                        <button data-value="moderate" class="active" style="padding: 0.3rem 0.6rem; border: 2px solid #0052cc; border-radius: 4px; background: #e3f2fd; cursor: pointer; font-weight: bold; font-size: 0.75rem;">Moderate</button>
                        <button data-value="strong" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Strong</button>
                        <button data-value="vivid" style="padding: 0.3rem 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer; font-size: 0.75rem;">Vivid</button>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div id="main-content" style="flex: 1; overflow-y: auto; padding: 2rem;">
                <div id="app" class="palette" style="max-width: 1600px; margin: 0 auto;">
                    <!-- Palettes will be rendered here -->
                </div>
            </div>
        </div>

    <!-- Export Modal -->
    <dialog id="export-dialog"
        style="padding: 2rem; border-radius: 8px; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.2); max-width: 500px; width: 100%;">
        <h3 style="margin-top: 0;">Export</h3>
        <textarea id="export-area"
            style="width: 100%; height: 200px; margin-bottom: 1rem; font-family: monospace;"></textarea>
        <div style="text-align: right;">
            <button onclick="document.getElementById('export-dialog').close()"
                style="padding: 0.5rem 1rem;">Close</button>
        </div>
    </dialog>

    <!-- Color Detail Drawer -->
    <!-- Color Detail Drawer -->
    <dialog id="color-detail-dialog" style="
        padding: 0; 
        border: none; 
        border-radius: 20px 20px 0 0; 
        box-shadow: 0 -4px 20px rgba(0,0,0,0.15); 
        width: 100%; 
        max-width: none;
        margin: 0; 
        margin-bottom: 0; 
        position: fixed; 
        bottom: 0; 
        left: 0; 
        right: 0; 
        top: auto; /* Ensure it doesn't stick to top */
        max-height: 80vh; /* Prevent it from taking full height */
        overflow-y: auto; /* Allow scrolling if content is tall */
    ">
        <style>
            dialog::backdrop {
                background: rgba(0, 0, 0, 0.4);
                backdrop-filter: blur(2px);
            }
            .contrast-card {
                background: white; 
                padding: 1.5rem; 
                border-radius: 8px; 
                border: 1px solid #eee;
                /* position: relative; Removed as icon is no longer absolute */
            }
            .fail-icon {
                /* position: absolute; Removed */
                /* top: 1rem; Removed */
                /* right: 1rem; Removed */
                color: #c5221f;
                display: none; /* Hidden by default */
                margin-right: 0.5rem; /* Add spacing */
            }
        </style>
        <!-- Mini Scale for quick switching -->
        <div id="detail-mini-scale" style="display: flex; height: 40px; border-radius: 20px 20px 0 0; overflow: hidden;">
            <!-- Mini swatches will be populated here -->
        </div>
        <div style="padding: 2rem; background: #f9f9f9; border-bottom: 1px solid #eee;">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1.5rem;">
                    <div id="detail-swatch" style="width: 80px; height: 80px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);"></div>
                    <div>
                        <h2 id="detail-step" style="margin: 0; font-size: 2rem; font-weight: 800; letter-spacing: -0.02em;">600</h2>
                        <code id="detail-hex" style="font-size: 1rem; color: #666;">#008bf2</code>
                    </div>
                </div>
                <button onclick="document.getElementById('color-detail-dialog').close()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #999;">&times;</button>
            </div>
            <button id="set-key-color-btn" style="padding: 0.5rem 1rem; background: transparent; color: #666; border: 1px solid #ccc; border-radius: 6px; font-size: 0.75rem; cursor: pointer;">
                この色をキーカラーに設定
            </button>
        </div>
        <div style="padding: 2rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
            <!-- White Contrast -->
            <div class="contrast-card">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <div id="detail-white-fail-icon" class="fail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    </div>
                    <h4 style="margin: 0; font-size: 0.9rem; color: #333;">白に対するコントラスト</h4>
                    <span id="detail-white-badge" style="font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; font-weight: bold;">-</span>
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.75rem; color: #666; margin-bottom: 0.25rem;">WCAG コントラスト</div>
                    <div id="detail-white-ratio" style="font-size: 2.5rem; font-weight: 800; letter-spacing: -0.02em;">-</div>
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.75rem; color: #666; margin-bottom: 0.25rem;">APCA (Lc)</div>
                    <div id="detail-white-apca" style="font-size: 1.5rem; font-weight: 700;">-</div>
                </div>
                <div id="detail-white-preview" style="padding: 1rem; border-radius: 6px; font-size: 0.9rem; font-weight: 500; text-align: center; margin-bottom: 0.5rem;">
                    視認性の確認用テキストです。読みやすさを確認してください。
                </div>
                <div id="detail-white-preview-large" style="padding: 1rem; border-radius: 6px; font-size: 22px; font-weight: 700; text-align: center;">
                    大きな文字での視認性確認
                </div>
            </div>

            <!-- Black Contrast -->
            <div class="contrast-card">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <div id="detail-black-fail-icon" class="fail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    </div>
                    <h4 style="margin: 0; font-size: 0.9rem; color: #333;">黒に対するコントラスト</h4>
                    <span id="detail-black-badge" style="font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; font-weight: bold;">-</span>
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.75rem; color: #666; margin-bottom: 0.25rem;">WCAG コントラスト</div>
                    <div id="detail-black-ratio" style="font-size: 2.5rem; font-weight: 800; letter-spacing: -0.02em;">-</div>
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.75rem; color: #666; margin-bottom: 0.25rem;">APCA (Lc)</div>
                    <div id="detail-black-apca" style="font-size: 1.5rem; font-weight: 700;">-</div>
                </div>
                <div id="detail-black-preview" style="padding: 1rem; border-radius: 6px; font-size: 0.9rem; font-weight: 500; text-align: center; margin-bottom: 0.5rem;">
                    視認性の確認用テキストです。読みやすさを確認してください。
                </div>
                <div id="detail-black-preview-large" style="padding: 1rem; border-radius: 6px; font-size: 22px; font-weight: 700; text-align: center;">
                    大きな文字での視認性確認
                </div>
            </div>
        </div>
    </dialog>

    <script type="module" src="./dist/index.js"></script>
    <script type="module">
        // The bundle should expose a global object or we can import if it's an ES module
        // For this demo, we'll rely on the bundle executing the demo logic if we add it to index.ts
        // OR we can import from the bundle if it exports the classes.
        
        // Let's assume we modify src/index.ts to run the demo if #app exists.
    </script>
</body>

</html>