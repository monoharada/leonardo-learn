<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color token Generator</title>
    <link rel="stylesheet" href="./src/ui/styles/tokens.css">
    <link rel="stylesheet" href="./src/ui/styles/components.css">
</head>

<body>
    <div class="dads-layout">
        <!-- Sidebar -->
        <div class="dads-sidebar">
            <div class="dads-sidebar__header">
                <h1>Color token Generator</h1>

                <!-- Global Key Color Input -->
                <div class="dads-form-field">
                    <label for="keyColors" class="dads-label">Brand Color</label>
                    <div class="dads-form-row">
                        <input type="text" id="keyColors" class="dads-input" placeholder="#0066CC" value="">
                        <button id="generate-system" class="dads-button" data-variant="primary">
                            Generate
                        </button>
                    </div>
                </div>

                <!-- Harmony Selection -->
                <div class="dads-form-field">
                    <label class="dads-label">Harmony</label>
                    <div id="harmony-buttons" class="dads-button-group">
                        <button data-value="none" class="dads-button" data-size="sm">None</button>
                        <button data-value="complementary" class="dads-button" data-size="sm" data-active="true">Comp</button>
                        <button data-value="analogous" class="dads-button" data-size="sm">Analog</button>
                        <button data-value="triadic" class="dads-button" data-size="sm">Triad</button>
                        <button data-value="split-complementary" class="dads-button" data-size="sm">Split</button>
                        <button data-value="tetradic" class="dads-button" data-size="sm">Tetrad</button>
                        <button data-value="square" class="dads-button" data-size="sm">Square</button>
                        <button data-value="m3" class="dads-button" data-size="sm">M3</button>
                        <button data-value="dads" class="dads-button" data-size="sm">DADS</button>
                    </div>
                    <!-- Hidden select for backward compatibility/state storage if needed -->
                    <input type="hidden" id="harmony" value="complementary">
                </div>
            </div>

            <!-- Palette List -->
            <div class="dads-sidebar__content">
                <h3>Palettes</h3>
                <div id="palette-list">
                    <!-- List of palettes will go here -->
                </div>

                <button id="add-palette" class="dads-button dads-button--dashed">
                    + Add Custom Palette
                </button>
            </div>

            <!-- Selected Palette Controls -->
            <div id="sidebar-controls" class="dads-sidebar__footer">
                <h3 id="current-palette-name">Palette Settings</h3>

                <div class="dads-export-section">
                    <button id="export-css" class="dads-button dads-button--block">
                        Export CSS
                    </button>
                    <button id="export-tailwind" class="dads-button dads-button--block">
                        Export Tailwind
                    </button>
                    <button id="export-json" class="dads-button dads-button--block">
                        Export DTCG JSON
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content (Right) -->
        <div class="dads-main">

            <!-- Header / View Switcher -->
            <div class="dads-main__header">
                <div class="dads-view-switcher">
                    <button id="view-palette" class="dads-view-switcher__button view-btn" data-active="true">パレット</button>
                    <button id="view-shades" class="dads-view-switcher__button view-btn">シェード</button>
                    <button id="view-accessibility" class="dads-view-switcher__button view-btn">アクセシビリティ</button>
                </div>
                <div id="header-contrast-controls" class="dads-header-controls" style="display: none;">
                    <label class="dads-header-controls__label">Contrast:</label>
                    <div id="contrastIntensityButtons" class="dads-button-group">
                        <button data-value="subtle" class="dads-button" data-size="sm">Subtle</button>
                        <button data-value="moderate" class="dads-button" data-size="sm" data-active="true">Moderate</button>
                        <button data-value="strong" class="dads-button" data-size="sm">Strong</button>
                        <button data-value="vivid" class="dads-button" data-size="sm">Vivid</button>
                    </div>
                </div>
                <!-- CVD Simulation Controls -->
                <div id="cvd-controls" class="dads-cvd-controls">
                    <div class="dads-header-controls">
                        <label class="dads-header-controls__label">Vision:</label>
                        <div id="cvdTypeButtons" class="dads-button-group">
                            <button data-cvd="normal" class="dads-button" data-size="sm" data-active="true">Normal</button>
                            <button data-cvd="protanopia" class="dads-button" data-size="sm">P型</button>
                            <button data-cvd="deuteranopia" class="dads-button" data-size="sm">D型</button>
                            <button data-cvd="tritanopia" class="dads-button" data-size="sm">T型</button>
                            <button data-cvd="achromatopsia" class="dads-button" data-size="sm">全色盲</button>
                        </div>
                    </div>
                    <div id="cvd-score" class="dads-cvd-score">
                        <span id="cvd-score-value" class="dads-cvd-score__value">-</span>
                        <span id="cvd-score-grade" class="dads-cvd-score__grade">-</span>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div id="main-content" class="dads-main__content">
                <div id="app" class="palette">
                    <!-- Palettes will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <dialog id="export-dialog" class="dads-dialog">
        <h3 style="margin-top: 0;">Export</h3>
        <textarea id="export-area" class="dads-input" style="width: 100%; height: 200px; margin-bottom: 1rem; font-family: var(--dads-font-mono);"></textarea>
        <div style="text-align: right;">
            <button onclick="document.getElementById('export-dialog').close()" class="dads-button">Close</button>
        </div>
    </dialog>

    <!-- Color Detail Drawer -->
    <dialog id="color-detail-dialog" class="dads-dialog dads-dialog--drawer">

        <div style="display: flex; flex-direction: column; height: 100%;">
            <!-- Mini Scale (Fixed at top edge) -->
            <div id="detail-mini-scale" class="dads-mini-scale">
                <!-- Mini swatches will be populated here -->
            </div>

            <!-- Header Info (Fixed below scale) -->
            <div class="dads-dialog__header">
                <div style="display: flex; align-items: center; gap: 1.5rem; max-width: 1400px; margin: 0 auto; width: 100%;">
                    <div id="detail-swatch" style="width: 56px; height: 56px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);"></div>
                    <div>
                        <h2 id="detail-chroma-name" style="margin: 0 0 0.1rem 0; font-size: 1.1rem; font-weight: 800;"></h2>
                        <div id="detail-token-name" style="font-size: 0.9rem; color: var(--dads-text-secondary); font-weight: 600;"></div>
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-top: 0.25rem;">
                            <code id="detail-hex" class="dads-text-mono"></code>
                            <span id="detail-lightness" style="font-size: 0.8rem; color: var(--dads-text-tertiary);"></span>
                        </div>
                    </div>
                    <div style="margin-left: auto;">
                         <form method="dialog">
                            <button class="dads-button" style="background: none; border: none; padding: 0.5rem; border-radius: 50%; color: var(--dads-text-secondary);">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Main Content (Scrollable) -->
            <div class="dads-dialog__body">
                <div style="display: grid; grid-template-columns: 0.6fr 0.4fr; gap: 4rem; max-width: 1400px; margin: 0 auto; width: 100%;">

                    <!-- Col 1: Contrast -->
                    <div style="display: flex; flex-direction: column; gap: 1rem; flex: 3;">
                        <h3 style="margin: 0; font-size: 1rem; font-weight: 700;">コントラスト</h3>
                        <div class="dads-grid" data-columns="2">
                            <!-- White Card -->
                            <div id="detail-white-card" class="dads-contrast-card" data-bg="white">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span class="dads-contrast-card__label">白に対するコントラスト</span>
                                    <span id="detail-white-badge" class="dads-badge">-</span>
                                </div>
                                <div style="display: flex; align-items: baseline; gap: 0.5rem;">
                                    <span id="detail-white-ratio" class="dads-contrast-card__ratio">-</span>
                                    <span style="font-size: 0.8rem; color: var(--dads-text-tertiary);">:1</span>
                                </div>
                                <div id="detail-white-preview" class="dads-contrast-card__preview">
                                    吾輩は猫である。名前はまだ無い。どこで生れたかとんと見当がつかぬ。
                                </div>
                                <div id="detail-white-preview-large" class="dads-contrast-card__preview--large">
                                    大きな文字での見え方を確認します
                                </div>
                                <div id="detail-white-fail-icon" class="dads-contrast-card__fail">
                                    ⚠️ コントラスト不足
                                </div>
                            </div>

                            <!-- Black Card -->
                            <div id="detail-black-card" class="dads-contrast-card" data-bg="black">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span class="dads-contrast-card__label">黒に対するコントラスト</span>
                                    <span id="detail-black-badge" class="dads-badge">-</span>
                                </div>
                                <div style="display: flex; align-items: baseline; gap: 0.5rem;">
                                    <span id="detail-black-ratio" class="dads-contrast-card__ratio">-</span>
                                    <span style="font-size: 0.8rem; color: var(--dads-text-secondary);">:1</span>
                                </div>
                                <div id="detail-black-preview" class="dads-contrast-card__preview">
                                    吾輩は猫である。名前はまだ無い。どこで生れたかとんと見当がつかぬ。
                                </div>
                                <div id="detail-black-preview-large" class="dads-contrast-card__preview--large">
                                    大きな文字での見え方を確認します
                                </div>
                                <div id="detail-black-fail-icon" class="dads-contrast-card__fail">
                                    ⚠️ コントラスト不足
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Col 2: Color Tuner & Actions -->
                    <div style="display: flex; flex-direction: column; gap: 1.5rem; width: 100%; flex: 1;">
                         <h3 style="margin: 0; font-size: 1rem; font-weight: 700;">カラーチューナー</h3>
                         <p style="margin: 0; font-size: 0.8rem; color: var(--dads-text-secondary);">
                            ドラッグ: ↔ 色相 (Hue)<br>
                            Shift + ドラッグ: 精密操作
                         </p>
                         <!-- Infinite Scrubber -->
                        <div class="dads-scrubber">
                             <canvas id="tuner-scrubber"></canvas>
                             <!-- Center Indicator -->
                             <div class="dads-scrubber__indicator"></div>
                        </div>

                         <!-- Actions -->
                         <div class="dads-dialog__actions">
                            <button id="detail-reset-btn" class="dads-button">
                                リセット
                            </button>
                            <button id="detail-save-btn" class="dads-button" data-variant="primary">
                                保存
                            </button>
                         </div>
                    </div>

                </div>
            </div>
        </div>
    </dialog>

    <script type="module" src="./dist/index.js"></script>
</body>

</html>
